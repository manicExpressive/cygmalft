<html>
<head>
<metaname="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scal able=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<style>
body {padding: 2rem; font-size: 2em; margin: 1rem}
img {margin: 1rem 0; width: 100%; height: auto;}
input, button {font-size: 1em; margin: 1rem 0;}
</style>
<title>Can you get me a link for this?</title>
</head>
<body>
<p>Paste a link and we'll try to find a way</p>
<form action="/" method="GET" id="request-form">
<input name="s" id="s" value="" />
<button>Can you get me a link for this?</button>
<form>
<script>
// This is kind of awful, but in my defense it used to be a bookmarklet
if (window.location.search) {
// I used r because autocomplete wasn't working and I kept mistyping my variable names, this is not a good idea!
const r = document.querySelector('#request-form');
const div = document.createElement('div');
const queryString = window.location.search.replace("?s=",'')
  try {
    let submittedUrl = new URL(decodeURIComponent(queryString) + "?outputType=amp&message=fuckYourPaywall");
    console.log(submittedUrl);
		div.innerHTML = `<a href="${submittedUrl}">${submittedUrl}</a> <img src="https://silly-lily-2025ee.netlify.app/${queryString}">`;
  }
  catch (error) {
    div.innerHTML = `We choked on that one, sorry! <a href="">Maybe submit an issue?</a>`;
  console.error(error);
  }
    r.parentNode.insertBefore( div, r );
}
</script>
</body>
</html>
