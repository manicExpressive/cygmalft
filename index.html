<html><head>
<meta name="color-scheme" content="light dark">
<style>
html, body {height: 100%; display: flex;}
body {height: 100%; display: flex; flex-direction: column; font-family: sans-serif; padding: 2rem; font-size: 2em; margin: 1rem}
img {margin: 1rem 0; width: 100%; height: auto;}
input, button, li {font-size: 1em; margin: 1rem 0; width: 100%;}
button {
  padding: 2rem;
  border-radius: 6px;
  text-align: center;
  width: 100%;
}
main {
  flex: 1 0 auto;
}
footer {
   flex-shrink: 0;
}
/* Elite level dark / light mode */
@media (prefers-color-scheme: dark) {
	body {
    background: black;
    color: white;
  }}
</style>
<title>Can you get me a link for this?</title>
<metaname="viewport"content="width=device-width,initial-scale=1,maximum-scale=1,user-scal able=no"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="generator" content="{{ eleventy.generator }}">
</head>
<body>
    <main>
<p>Paste a link and we'll try to find a way</p>
<form action="/" method="GET" id="request-form" aria-label="Request public link">
<input placeholder="URL" name="s" id="s" value="" />
<button>Can you get me a link for this?</button>
</form>
    </main>
    <footer>
<details>
<summary>Who/What/When/Where/Why</summary>
<ul>
<li><strong>Who:</strong> It's me, <a href="https://joshuablount.com">Joshie B</a></li>
<li><strong>What:</strong> A way to access links to local journalism</a>
<li><strong>When:</strong> {{ page.date }}</li>
<li><strong>Where:</strong> NoPo, Portland, Oregon</li>
<li><strong>Why:</strong> Paywalling access to journalism is class warfare</li> 
</ul>
</details>
    </footer>
<script>
// This is kind of awful, but in my defense it used to be a bookmarklet
if (window.location.search) {
// I used r because autocomplete wasn't working and I kept mistyping my variable names, this is not a good idea!
const r = document.querySelector('#request-form');
const div = document.createElement('div');
const queryString = window.location.search.replace("?s=",'')
  try {
    let submittedUrl = new URL(decodeURIComponent(queryString) + "?outputType=amp&message=fuckYourPaywall");
    console.log(submittedUrl);
		div.innerHTML = `<a href="${submittedUrl}">${submittedUrl}</a> <img src="https://silly-lily-2025ee.netlify.app/${queryString}">`;
  }
  catch (error) {
    div.innerHTML = `We choked on that one, sorry! <a href="https://github.com/manicExpressive/cygmalft/issues">Maybe submit an issue?</a>`;
  console.error(error);
  }
    r.parentNode.insertBefore( div, r );
}
</script>
</body>
</html>
